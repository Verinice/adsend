!function(){function e(e){let t,n,i=e.length;for(;i;)n=Math.floor(Math.random()*i--),t=e[i],e[i]=e[n],e[n]=t;return e}const t=new WeakMap;function n(n,i){let a=t.get(n);return a&&0!==a.length||(a=e([...i]),t.set(n,a)),a.shift()}function i(e,t,i){if(t.classList.contains("ad-send-banner")||t.id?.startsWith("banner-slot-")){let i=t.querySelector(".ad-send-banner");i||(i=document.createElement("div"),i.className="ad-send-banner",i.style.width="100%",i.style.height="100%",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.overflow="hidden",i.style.minHeight="unset",i.style.maxHeight="unset",i.style.boxSizing="border-box",t.innerHTML="",t.appendChild(i));const a=t.getBoundingClientRect();i.style.height=a.height+"px",i.style.maxHeight=a.height+"px",i.style.minHeight=a.height+"px",i.style.width="100%";const r=n(t,e);i.innerHTML=r;const l=i.firstElementChild;l&&(l.style.width="100%",l.style.height="100%",l.style.display="flex",l.style.alignItems="center",l.style.justifyContent="center",l.style.overflow="hidden",l.style.boxSizing="border-box");i.querySelectorAll("img").forEach((e=>{e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.width="100%",e.style.height="100%",e.style.objectFit="contain",e.style.display="block",e.style.margin="0",e.style.boxSizing="border-box"}));return void i.querySelectorAll("iframe").forEach((e=>{e.style.width="100%",e.style.height="100%",e.style.display="block"}))}let r=t.querySelector(".ad-send-banner");const l=Array.from(t.children).filter((e=>!e.classList.contains("ad-send-banner")));if(l.length<3)return;let o;if(void 0!==t.dataset.adIndex)o=parseInt(t.dataset.adIndex,10),(isNaN(o)||o<1||o>=l.length-1)&&(o=1,t.dataset.adIndex=o);else{const e=[];for(let t=1;t<l.length-1;t++)e.push(t);if(o=e[Math.floor(Math.random()*e.length)],void 0===o)return;t.dataset.adIndex=o}const d=l[o],c=d.getBoundingClientRect(),h=c.width,y=c.height;r?(r.previousSibling!==d&&(d.nextSibling?t.insertBefore(r,d.nextSibling):t.appendChild(r)),r.style.width=h+"px",r.style.height=y+"px",r.style.minWidth=h+"px",r.style.minHeight=y+"px",r.style.maxWidth=h+"px",r.style.maxHeight=y+"px"):(r=document.createElement("div"),r.className="ad-send-banner",r.style.width=h+"px",r.style.height=y+"px",r.style.display="flex",r.style.alignItems="center",r.style.justifyContent="center",r.style.overflow="hidden",r.style.minWidth=h+"px",r.style.minHeight=y+"px",r.style.maxWidth=h+"px",r.style.maxHeight=y+"px",d.nextSibling?t.insertBefore(r,d.nextSibling):t.appendChild(r));let f=Array.from(t.children).filter((e=>e!==r&&!e.classList.contains("ad-send-banner"))),m=n(t,e),g=null;if(s){let e=t.querySelector(s);if(e){const t=e.cloneNode(!1),n=window.getComputedStyle(e);for(let e=0;e<n.length;e++){const i=n[e];t.style.setProperty(i,n.getPropertyValue(i),n.getPropertyPriority(i))}t.className=e.className,t.id=e.id?e.id+"-ad":"",a&&a.length&&window._adConfigBanners&&(g=window._adConfigBanners.find((e=>m.includes(e.imageUrl)))),g&&g.targetUrl?t.innerHTML=`<a href="${g.targetUrl}" target="_blank" rel="noopener noreferrer">${m}</a>`:t.innerHTML=m,r.innerHTML="",r.appendChild(t),f=[e]}}else!function(e,t){if(!t.length)return;const n=Array.from(t).find((t=>t!==e&&"none"!==window.getComputedStyle(t).display));if(!n)return;const i=window.getComputedStyle(n);for(let t=0;t<i.length;t++){const n=i[t];e.style.setProperty(n,i.getPropertyValue(n),i.getPropertyPriority(n))}e.className=n.className.split(" ").filter((e=>e&&"ad-send-banner"!==e)).concat(["ad-send-banner"]).join(" "),n.id&&n.id!==e.id&&(e.id=n.id+"-ad")}(r,f),r.innerHTML=m;const p=r.firstElementChild;p&&(p.style.width="100%",p.style.height="100%",p.style.display="flex",p.style.alignItems="center",p.style.justifyContent="center",p.style.overflow="hidden",p.style.boxSizing="border-box");r.querySelectorAll("img").forEach((e=>{e.style.maxWidth="100%",e.style.maxHeight="100%",e.style.width="100%",e.style.height="100%",e.style.objectFit="contain",e.style.display="block",e.style.margin="0",e.style.boxSizing="border-box"}));r.querySelectorAll("iframe").forEach((e=>{e.style.width="100%",e.style.height="100%",e.style.display="block"})),function(e,t){e.classList.remove("ad-flip-in","ad-bounce-in","ad-fade-in","ad-slide-in");const n=["ad-flip-in","ad-bounce-in","ad-fade-in","ad-slide-in"],i=n[Math.floor(Math.random()*n.length)];e.offsetWidth,e.classList.add(i),e.addEventListener("animationend",(function t(){e.classList.remove(i),e.removeEventListener("animationend",t)}));const a=e.querySelectorAll("img");if(a.forEach((e=>{e.classList.remove("ad-img-anim"),e.offsetWidth,e.classList.add("ad-img-anim")})),t){const n=t.getBoundingClientRect();e.style.height=n.height+"px",e.style.maxHeight=n.height+"px",e.style.minHeight=n.height+"px",e.style.width="100%",a.forEach((e=>{e.style.height="100%",e.style.maxHeight="100%",e.style.minHeight="100%"}))}else e.style.height="100%",e.style.maxHeight="100%",e.style.minHeight="100%",e.style.width="100%",a.forEach((e=>{e.style.height="100%",e.style.maxHeight="100%",e.style.minHeight="100%"}))}(r,d)}let a=[],r=0,l=[],o=Math.floor(1e3*Math.random()),s=null;async function d(){let e;try{let t="";if(document.currentScript&&document.currentScript.src){t=new URL(document.currentScript.src,window.location.origin).origin}else t=window.location.origin;const n=t+"/env.txt",i=await fetch(n);if(!i.ok)throw new Error("Could not load env.txt file");const a=(await i.text()).match(/^CONFIG_URL\s*=\s*(.+)$/m);if(!a)throw new Error("CONFIG_URL not found in env.txt file");e=a[1].trim(),window.CONFIG_URL=e}catch(e){throw new Error("[AdSend] CONFIG_URL is required in env.txt file: "+e.message)}const t=await fetch(e);if(!t.ok)return;const n=await t.json(),i=Array.isArray(n)?n.find((e=>e.property_id===h)):null;if(!i)return;window._adConfigBanners=i.banners||[];const d=window.location.origin+window.location.pathname;i.url&&!d.startsWith(i.url)||(l=Array.isArray(i.containers)?i.containers:[],l.length&&"object"==typeof l[0]&&l[0].name&&(l=l.map((e=>e.name)).filter(Boolean)),a=(i.banners||[]).map((e=>e.imageUrl&&e.targetUrl?`<a href="${e.targetUrl}" target="_blank" rel="noopener noreferrer"><img src="${e.imageUrl}" alt="ad" class="ad-img-anim" style="max-width:100%;height:auto;display:block;" /></a>`:e.imageUrl?`<img src="${e.imageUrl}" alt="ad" class="ad-img-anim" style="max-width:100%;height:auto;display:block;" />`:"")).filter(Boolean),s=i.copySiblingSelector||null,r=0,o=Math.floor(1e3*Math.random()))}function c(){if(!a.length)return;if(!l.length)return void console.error("[ad-injector] No container selectors found for this page. Please define at least one container/selector.");let t=[];if(l.forEach((e=>{t=t.concat(Array.from(document.querySelectorAll(e)))})),!t.length)return;e([...t]).forEach((e=>{i(a,e)}))}const h=document.currentScript.getAttribute("data-property");h&&(async function(){if(await d(),!l.length)return void console.error("[AdSend] No container selectors found for this page. Please define at least one container/selector in ad-config.json.");let t=[];l.forEach((e=>{const n=Array.from(document.querySelectorAll(e));t=t.concat(n)})),a.length&&t.length&&(t=e(t),t.forEach((e=>{i(a,e)}))),a.length>1&&(setInterval(c,1e4),setInterval(d,3e5))}(),function(){if(document.getElementById("ad-injector-animations"))return;const e=document.createElement("style");e.id="ad-injector-animations",e.textContent="\n    .ad-flip-in { animation: adFlipIn 0.7s cubic-bezier(.4,2,.6,1) both; }\n    .ad-bounce-in { animation: adBounceIn 0.7s cubic-bezier(.4,2,.6,1) both; }\n    .ad-fade-in { animation: adFadeIn 0.7s cubic-bezier(.4,2,.6,1) both; }\n    .ad-slide-in { animation: adSlideIn 0.7s cubic-bezier(.4,2,.6,1) both; }\n    .ad-img-anim { animation: adImgFadeIn 0.7s cubic-bezier(.4,2,.6,1) both; }\n    .ad-send-banner { /* replaces .ad-injected-banner for send ads */ }\n    @keyframes adFlipIn {\n      0% { transform: rotateY(90deg) scale(0.8); opacity: 0; }\n      60% { transform: rotateY(-10deg) scale(1.05); opacity: 1; }\n      80% { transform: rotateY(5deg) scale(0.98); }\n      100% { transform: none; opacity: 1; }\n    }\n    @keyframes adBounceIn {\n      0% { transform: scale(0.5) translateY(60px); opacity: 0; }\n      60% { transform: scale(1.1) translateY(-10px); opacity: 1; }\n      80% { transform: scale(0.95) translateY(2px); }\n      100% { transform: none; opacity: 1; }\n    }\n    @keyframes adFadeIn {\n      0% { opacity: 0; transform: scale(0.95); }\n      100% { opacity: 1; transform: none; }\n    }\n    @keyframes adSlideIn {\n      0% { opacity: 0; transform: translateY(40px) scale(0.98); }\n      80% { opacity: 1; transform: translateY(-4px) scale(1.01); }\n      100% { opacity: 1; transform: none; }\n    }\n    @keyframes adImgFadeIn {\n      0% { opacity: 0; filter: blur(8px); }\n      100% { opacity: 1; filter: none; }\n    }\n    ",document.head.appendChild(e)}())}();